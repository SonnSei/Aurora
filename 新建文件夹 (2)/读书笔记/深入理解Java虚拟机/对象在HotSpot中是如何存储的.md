# 在HotSpot中，对象的存储布局分为三个部分：
1. 对象头Header
2. 实例数据Instance Data
3. 对齐填充Padding


# HotSpot的Header包含两部分信息：
1. Mark Word：非固定结构
2. 类型指针：指向类元数据的指针
3. 如果对象是数组，还需要一块用于记录数组长度的数据


# Mark Word具体内容

|存储内容|标志位|状态|
|--|--|--|
|对象的哈希码，分代年龄|01|未锁|
|指向锁记录的指针|00|轻量级锁定|
|指向重量级锁的指针|10|膨胀（重量级锁定）|
|空，不需要记录信息|11|GC标记|
|偏向线程ID，偏向时间戳，对象分代年龄|01|可偏向|


# TIPS

对象头中的类型指针不是必须的，也就是查找对象的元数据并不一定要经过对象本身（句柄？）

* * * 

对象定位的两种方式：**HotSpot使用第二种，所以其header中有类型指针**
1. 句柄：Java堆中划出句柄池，引用指向句柄。
2. 直接指针访问：**那么Java堆中对象的存储布局中就要考虑如何放置类型数据信息**